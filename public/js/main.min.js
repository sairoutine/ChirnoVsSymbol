!function t(e,i,o){function n(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[s]={exports:{}};e[s][0].call(p.exports,function(t){var i=e[s][1][t];return n(i?i:t)},p,p.exports,t,e,i,o)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(t,e,i){"use strict";var o=t("./hakurei").core,n=t("./hakurei").util,r=t("./scene/stg"),s=t("./scene/loading"),a=function(t){o.apply(this,arguments),this.addScene("stg",new r(this)),this.addScene("loading",new s(this))};n.inherit(a,o),a.prototype.init=function(){o.prototype.init.apply(this,arguments),this.changeScene("loading")},e.exports=a},{"./hakurei":2,"./scene/loading":15,"./scene/stg":16}],2:[function(t,e,i){"use strict";e.exports=t("./hakurejs/index")},{"./hakurejs/index":6}],3:[function(t,e,i){"use strict";var o=function(t){this.images={},this.loading_image_num=0,this.loaded_image_num=0};o.prototype.init=function(){for(var t in this.images)this.images[t].src="";this.images={},this.loading_image_num=0,this.loaded_image_num=0},o.prototype.loadImage=function(t,e){var i=this;i.loading_image_num++;var o=function(){i.loaded_image_num++},n=new Image;n.src=e,n.onload=o,this.images[t]=n},o.prototype.isAllLoaded=function(){return this.loaded_image_num>0&&this.loaded_image_num===this.loading_image_num},o.prototype.getImage=function(t){return this.images[t]},e.exports=o},{}],4:[function(t,e,i){"use strict";var o={BUTTON_SHIFT:16,BUTTON_SPACE:32,BUTTON_LEFT:37,BUTTON_UP:38,BUTTON_RIGHT:39,BUTTON_DOWN:40,BUTTON_X:88,BUTTON_Z:90};e.exports=o},{}],5:[function(t,e,i){"use strict";var o=t("./constant"),n=t("./asset_loader/image"),r=function(t){this.ctx=t.getContext("2d"),this.width=Number(t.getAttribute("width")),this.height=Number(t.getAttribute("height")),this.current_scene=null,this.scenes={},this.frame_count=0,this.request_id=null,this.key_down_map={},this.image_loader=new n};r.prototype.init=function(){this.current_scene=null,this.frame_count=0,this.request_id=null,this.key_down_map={},this.image_loader.init()},r.prototype.isRunning=function(){return this.request_id?!0:!1},r.prototype.startRun=function(){this.isRunning()||this.run()},r.prototype.run=function(){this.handleGamePad();var t=this.currentScene();t&&(t.beforeDraw(),this.clearCanvas(),t.draw(),t.afterDraw()),this.frame_count++,this.request_id=requestAnimationFrame(this.run.bind(this))},r.prototype.currentScene=function(){return null!==this.current_scene?this.scenes[this.current_scene]:void 0},r.prototype.addScene=function(t,e){this.scenes[t]=e},r.prototype.changeScene=function(t){this.current_scene=t,this.currentScene().init()},r.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height)},r.prototype.handleKeyDown=function(t){var e=t.keyCode;e in this.key_down_map||(this.key_down_map[e]=0),this.key_down_map[e]++,t.preventDefault()},r.prototype.handleKeyUp=function(t){this.key_down_map[t.keyCode]=0,t.preventDefault()},r.prototype.handleGamePad=function(){var t=navigator.getGamepads(),e=t[0];if(e){for(var i=[o.BUTTON_Z,o.BUTTON_X],n=0,r=i.length;r>n;n++)e.buttons[n].pressed?(i[n]in this.key_down_map||(this.key_down_map[i[n]]=0),this.key_down_map[i[n]]++):this.key_down_map[i[n]]=0;e.axes[1]<-.5?(o.BUTTON_UP in this.key_down_map||(this.key_down_map[o.BUTTON_UP]=0),this.key_down_map[o.BUTTON_UP]++):this.key_down_map[o.BUTTON_UP]=0,e.axes[1]>.5?(o.BUTTON_UP in this.key_down_map||(this.key_down_map[o.BUTTON_DOWN]=0),this.key_down_map[o.BUTTON_DOWN]++):this.key_down_map[o.BUTTON_DOWN]=0,e.axes[0]<-.5?(o.BUTTON_UP in this.key_down_map||(this.key_down_map[o.BUTTON_LEFT]=0),this.key_down_map[o.BUTTON_LEFT]++):this.key_down_map[o.BUTTON_LEFT]=0,e.axes[0]>.5?(o.BUTTON_UP in this.key_down_map||(this.key_down_map[o.BUTTON_RIGHT]=0),this.key_down_map[o.BUTTON_RIGHT]++):this.key_down_map[o.BUTTON_RIGHT]=0}},r.prototype.isKeyDown=function(t){return this.key_down_map[t]>0?!0:!1},r.prototype.isKeyPush=function(t){return 1===this.key_down_map[t]?!0:!1},e.exports=r},{"./asset_loader/image":3,"./constant":4}],6:[function(t,e,i){"use strict";e.exports={util:t("./util"),core:t("./core"),constant:t("./constant"),scene:{base:t("./scene/base")},object:{base:t("./object/base"),pool_manager:t("./object/pool_manager")},asset_loader:{image:t("./asset_loader/image")}}},{"./asset_loader/image":3,"./constant":4,"./core":5,"./object/base":7,"./object/pool_manager":8,"./scene/base":9,"./util":10}],7:[function(t,e,i){"use strict";var o=function(t){this.scene=t,this.core=t.core,this.frame_count=0,this.x=0,this.y=0};o.prototype.init=function(){this.frame_count=0,this.x=0,this.y=0},o.prototype.beforeDraw=function(){this.frame_count++},o.prototype.draw=function(){},o.prototype.afterDraw=function(){},e.exports=o},{}],8:[function(t,e,i){"use strict";var o=t("./base"),n=t("../util"),r=function(t){o.apply(this,arguments),this.objects=[]};n.inherit(r,o),r.prototype.init=function(){o.prototype.init.apply(this,arguments),this.objects=[]},r.prototype.beforeDraw=function(){o.prototype.beforeDraw.apply(this,arguments);for(var t=0,e=this.objects.length;e>t;t++)this.objects[t].beforeDraw()},r.prototype.draw=function(){o.prototype.draw.apply(this,arguments);for(var t=0,e=this.objects.length;e>t;t++)this.objects[t].draw()},r.prototype.afterDraw=function(){o.prototype.afterDraw.apply(this,arguments);for(var t=0,e=this.objects.length;e>t;t++)this.objects[t].afterDraw()},r.prototype.addObject=function(t){this.objects.push(t)},r.prototype.addObjects=function(t){this.objects=this.objects.concat(t)},e.exports=r},{"../util":10,"./base":7}],9:[function(t,e,i){"use strict";var o=function(t){this.core=t,this.frame_count=0,this.objects=[]};o.prototype.init=function(){this.frame_count=0;for(var t=0,e=this.objects.length;e>t;t++)this.objects[t].init()},o.prototype.beforeDraw=function(){this.frame_count++;for(var t=0,e=this.objects.length;e>t;t++)this.objects[t].beforeDraw()},o.prototype.draw=function(){for(var t=0,e=this.objects.length;e>t;t++)this.objects[t].draw()},o.prototype.afterDraw=function(){for(var t=0,e=this.objects.length;e>t;t++)this.objects[t].afterDraw()},o.prototype.addObject=function(t){this.objects.push(t)},e.exports=o},{}],10:[function(t,e,i){"use strict";var o={inherit:function(t,e){var i=function(t){if(Object.create)return Object.create(t);var e=function(){};return e.prototype=t,new e};t.prototype=i(e.prototype),t.prototype.constructor=t},radianToTheta:function(t){return 180*t/Math.PI|0},thetaToRadian:function(t){return t*Math.PI/180},hexToRGBString:function(t){var e="#"===t.charAt(0)?t.substring(1,7):t,i=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);return"rgb("+i+", "+o+", "+n+")"}};e.exports=o},{}],11:[function(t,e,i){"use strict";var o=function(){};o.prototype.init=function(){},o.prototype.update=function(){},o.prototype.is_occur=function(){},o.prototype.getAppearEnemies=function(){},e.exports=o},{}],12:[function(t,e,i){"use strict";var o=t("./game");window.AudioContext=window.AudioContext||window.webkitAudioContext;var n;window.onload=function(){var t=document.getElementById("mainCanvas");n=new o(t),n.init(),window.onkeydown=function(t){n.handleKeyDown(t)},window.onkeyup=function(t){n.handleKeyUp(t)},n.startRun()},window.onerror=function(t,e,i,o,n){window.alert(t+"\n"+i+":"+o)}},{"./game":1}],13:[function(t,e,i){"use strict";var o=t("../hakurei").object.base,n=t("../hakurei").util,r=t("../hakurei").constant,s=function(t){o.apply(this,arguments),this.velocity={theta:0,magnitude:10}};n.inherit(s,o),s.prototype.init=function(){o.prototype.init.apply(this,arguments),this.x=this.core.width/2,this.y=this.core.height/2};var a=315,h=225,c=45,p=135,u=270,y=90,d=180,f=0;s.prototype.beforeDraw=function(){o.prototype.beforeDraw.apply(this,arguments),this.core.isKeyDown(r.BUTTON_LEFT)&&this.core.isKeyDown(r.BUTTON_DOWN)?this.velocity.theta=p:this.core.isKeyDown(r.BUTTON_RIGHT)&&this.core.isKeyDown(r.BUTTON_DOWN)?this.velocity.theta=c:this.core.isKeyDown(r.BUTTON_LEFT)&&this.core.isKeyDown(r.BUTTON_UP)?this.velocity.theta=h:this.core.isKeyDown(r.BUTTON_RIGHT)&&this.core.isKeyDown(r.BUTTON_UP)?this.velocity.theta=a:this.core.isKeyDown(r.BUTTON_UP)?this.velocity.theta=u:this.core.isKeyDown(r.BUTTON_DOWN)?this.velocity.theta=y:this.core.isKeyDown(r.BUTTON_LEFT)?this.velocity.theta=d:this.core.isKeyDown(r.BUTTON_RIGHT)&&(this.velocity.theta=f)},s.prototype.calcMoveX=function(){var t=this.velocity.magnitude*Math.cos(n.thetaToRadian(this.velocity.theta));return t},s.prototype.calcMoveY=function(){var t=this.velocity.magnitude*Math.sin(n.thetaToRadian(this.velocity.theta));return t},s.prototype.draw=function(){o.prototype.draw.apply(this,arguments);var t=this.core.image_loader.getImage("chara"),e=this.core.ctx;e.save(),e.translate(this.x,this.y);var i=n.thetaToRadian(this.velocity.theta);e.rotate(i);var r=this.spriteWidth()*this.scale(),s=this.spriteHeight()*this.scale();e.drawImage(t,this.spriteWidth()*this.spriteIndexX(),this.spriteHeight()*this.spriteIndexY(),this.spriteWidth(),this.spriteHeight(),-r/2,-s/2,r,s),e.restore()},s.prototype.spriteIndexX=function(){return 3},s.prototype.spriteIndexY=function(){return 0},s.prototype.spriteWidth=function(){return 80},s.prototype.spriteHeight=function(){return 96},s.prototype.scale=function(){return 1},e.exports=s},{"../hakurei":2}],14:[function(t,e,i){"use strict";var o=t("../hakurei").object.base,n=t("../hakurei").util,r=function(t){o.apply(this,arguments),this.width=2e3,this.height=2e3};n.inherit(r,o),r.prototype.leftX=function(){return this.x},r.prototype.rightX=function(){return this.x+this.width},r.prototype.upY=function(){return this.y},r.prototype.downY=function(){return this.y+this.height},r.prototype.draw=function(){o.prototype.draw.apply(this,arguments);var t=this.core.ctx,e=10;t.fillStyle=n.hexToRGBString("608C87"),t.fillRect(this.leftX(),this.upY(),e,this.height),t.fillRect(this.leftX()+e,this.upY(),this.width,e),t.fillRect(this.rightX(),this.upY()+e,e,this.height),t.fillRect(this.leftX(),this.downY(),this.width,e)},e.exports=r},{"../hakurei":2}],15:[function(t,e,i){"use strict";var o=t("../hakurei").scene.base,n=t("../hakurei").util,r=function(t){o.apply(this,arguments)};n.inherit(r,o),r.prototype.init=function(){o.prototype.init.apply(this,arguments),this.core.image_loader.loadImage("chara","./image/chirno.png")},r.prototype.beforeDraw=function(){o.prototype.beforeDraw.apply(this,arguments),this.core.image_loader.isAllLoaded()&&this.core.changeScene("stg")},r.prototype.draw=function(){o.prototype.draw.apply(this,arguments);var t=this.core.ctx;t.save(),t.fillStyle="rgb( 0, 0, 0 )",t.textAlign="right",t.font="30px 'ＭＳ ゴシック'",t.fillText("Now Loading...",400,225),t.restore()},e.exports=r},{"../hakurei":2}],16:[function(t,e,i){"use strict";var o=t("../hakurei").scene.base,n=t("../hakurei").util,r=t("../hakurei").object.pool_manager,s=t("../hakurei").constant,a=t("../object/chara"),h=t("../object/stage"),c=t("../logic/enemy_appear"),p=function(t){o.apply(this,arguments),this.chara=new a(this),this.addObject(this.chara),this.enemies=new r(this),this.addObject(this.enemies),this.enemy_appear=new c,this.stage=new h(this),this.addObject(this.stage)};n.inherit(p,o),p.prototype.init=function(){o.prototype.init.apply(this,arguments),this.enemy_appear.init()},p.prototype.beforeDraw=function(){if(o.prototype.beforeDraw.apply(this,arguments),this.enemy_appear.update(),this.enemy_appear.is_occur()&&this.enemies.addObjects(this.enemy_appear.getAppearEnemies()),this.core.isKeyDown(s.BUTTON_Z)){var t=this.chara.calcMoveX(),e=this.chara.calcMoveY();this.stage.x-=t,this.stage.y-=e,this.chara.x<this.stage.leftX()?this.stage.x=this.chara.x:this.chara.x>this.stage.rightX()&&(this.stage.x=this.chara.x-this.stage.width),this.chara.y<this.stage.upY()?this.stage.y=this.chara.y:this.chara.y>this.stage.downY()&&(this.stage.y=this.chara.y-this.stage.height)}},p.prototype.draw=function(){var t=this.core.ctx;t.fillStyle=n.hexToRGBString("E2FFFC"),t.fillRect(0,0,this.core.width,this.core.height),o.prototype.draw.apply(this,arguments)},e.exports=p},{"../hakurei":2,"../logic/enemy_appear":11,"../object/chara":13,"../object/stage":14}]},{},[12]);